<div class="container mt-5">
  <div class="row row-cols-1 row-cols-md-4 g-4 mb-3">
    <app-select
      [data]="categories"
      [title]="'Categorias:'"
      (valueChange)="filters.category = $event"
    ></app-select>
    <app-select
      [data]="months"
      [title]="'Meses:'"
      (valueChange)="filters.month = $event"
    ></app-select>
    <app-select
      [data]="years"
      [title]="'Años:'"
      (valueChange)="filters.year = $event"
    ></app-select>
    <app-select
      [data]="sorts"
      [title]="'Orden:'"
      (valueChange)="filters.sort = $event"
    ></app-select>
    <div class="col">
      <div class="container">
        <h5>
          <b>Prueba</b>
        </h5>
      </div>
      <select
        class="form-select"
        aria-label="Default select example"
        [(ngModel)]="filters.category"
      >
        <option selected value="">Seleccione una opcion</option>
        @for (item of categories; track $index) {
        <option value="{{ item }}">{{ item }}</option>
        }
      </select>
    </div>
  </div>
</div>

<!-- recomended -->
<section class="new_arrive section_padding_b">
  <div class="container">
    <div class="d-flex align-items-start justify-content-between">
      <h2 class="section_title_2">Productos Ofertados</h2>
      @if (router.url === '/home' || router.url === '/') {
      <div class="seemore_2 pt-2">
        <a routerLink="/auction"
          >Ver más... <span><i class="las la-angle-right"></i></span
        ></a>
      </div>
      }
    </div>
    <div class="row gy-4">
      <div
        *ngFor="let product of products | filterProduct : filters"
        class="col-lg-3 col-sm-6"
      >
        <div class="single_new_arrive">
          <div class="sna_img">
            <img
              loading="lazy"
              class="prd_img"
              src="{{ url_base + product.images[0] }}"
              alt="product"
            />
            <span class="tag">{{ product.category }}</span>
            <div class="prodcut_hovcont">
              <a
                routerLink="/auction/{{ product.id }}/detail"
                class="icon open_quickview"
                tabindex="0"
              >
                <i class="icon-search-left"></i>
              </a>
            </div>
          </div>
          <div class="sna_content">
            <a routerLink="/auction/{{ product.id }}/detail">
              <h4>{{ product.commercial_name }}</h4>
            </a>
            <div class="ratprice">
              <div class="price">
                <span class="org_price">{{ product.current_bid }} Bs</span>
                @if(product.base_price != product.current_bid){
                <span class="prev_price">{{ product.base_price }} Bs</span>
                }
              </div>
              <div class="rating">
                <div class="d-flex align-items-center justify-content-start">
                  <div class="rating_star">
                    <span><i class="las la-star"></i></span>
                    <span><i class="las la-star"></i></span>
                    <span><i class="las la-star"></i></span>
                    <span><i class="las la-star"></i></span>
                    <span><i class="las la-star"></i></span>
                  </div>
                  <p class="rating_count">(150)</p>
                </div>
              </div>
            </div>
            <div class="product_adcart">
              <button
                class="default_btn"
                routerLink="/auction/{{ product.id }}/detail"
              >
                Enviar Puja
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- shop list view -->
<div class="shop_wrap section_padding_b">
  <div class="container">
    <div class="row">
      <div class="col-xl-3 col-lg-4 position-relative">
        <div class="filter_box py-3 px-3 shadow_sm">
          <div class="close_filter d-block d-lg-none">
            <i class="las la-times"></i>
          </div>
          <div class="shop_filter d-block d-sm-none">
            <h4 class="filter_title">Sort by</h4>
            <div class="sorting_filter mb-2">
              <select class="nice_select">
                <option value="">Default sorting</option>
                <option value="">Price low-high</option>
                <option value="">Price high-low</option>
              </select>
            </div>
          </div>

          <div class="shop_filter">
            <h4 class="filter_title">Categorias</h4>
            <div class="filter_list">
              @for (category of categories; track $index) {
              <div class="custom_check d-flex align-items-center">
                <input
                  type="checkbox"
                  class="check_inp"
                  id="cat-women"
                />
                <label for="cat-women">{{category}}</label>
                <!--
                <p class="mb-0 ms-auto">(16)</p>
                -->
              </div>
            }
              <div class="custom_check d-flex align-items-center">
                <input type="checkbox" class="check_inp" hidden id="cat-men" />
                <label for="cat-men">Men</label>
                <p class="mb-0 ms-auto">(9)</p>
              </div>
              <div class="custom_check d-flex align-items-center">
                <input
                  type="checkbox"
                  class="check_inp"
                  hidden
                  id="cat-shoes"
                />
                <label for="cat-shoes">Shoes</label>
                <p class="mb-0 ms-auto">(19)</p>
              </div>
              <div class="custom_check d-flex align-items-center">
                <input
                  type="checkbox"
                  class="check_inp"
                  hidden
                  id="cat-computer"
                />
                <label for="cat-computer">Computer</label>
                <p class="mb-0 ms-auto">(35)</p>
              </div>
            </div>
          </div>
          <div class="shop_filter">
            <h4 class="filter_title">Brands</h4>
            <div class="filter_list">
              <div class="custom_check d-flex align-items-center">
                <input
                  type="checkbox"
                  class="check_inp"
                  hidden
                  id="bnd-adidas"
                  checked
                />
                <label for="bnd-adidas">Adidas</label>
              </div>
              <div class="custom_check d-flex align-items-center">
                <input type="checkbox" class="check_inp" hidden id="bnd-nike" />
                <label for="bnd-nike">Nike</label>
              </div>
              <div class="custom_check d-flex align-items-center">
                <input type="checkbox" class="check_inp" hidden id="bnd-easy" />
                <label for="bnd-easy">Easy</label>
              </div>
              <div class="custom_check d-flex align-items-center">
                <input
                  type="checkbox"
                  class="check_inp"
                  hidden
                  id="bnd-arong"
                />
                <label for="bnd-arong">Arong</label>
              </div>
            </div>
          </div>
          <div class="shop_filter">
            <h4 class="filter_title">Price</h4>
            <div class="price-range-slider">
              <div id="slider-range" class="range-bar"></div>
              <p class="range-value">
                <input type="text" id="amount" readonly />
              </p>
            </div>
          </div>
          <div class="shop_filter">
            <h4 class="filter_title">Size</h4>
            <div class="size_selector d-flex">
              <div class="single_size_opt">
                <input
                  type="radio"
                  hidden
                  name="size"
                  class="size_inp"
                  id="size-xs"
                />
                <label for="size-xs">XS</label>
              </div>
              <div class="single_size_opt ms-2">
                <input
                  type="radio"
                  hidden
                  name="size"
                  class="size_inp"
                  id="size-s"
                />
                <label for="size-s">S</label>
              </div>
              <div class="single_size_opt ms-2">
                <input
                  type="radio"
                  hidden
                  name="size"
                  class="size_inp"
                  id="size-m"
                  checked
                />
                <label for="size-m">M</label>
              </div>
              <div class="single_size_opt ms-2">
                <input
                  type="radio"
                  hidden
                  name="size"
                  class="size_inp"
                  id="size-l"
                />
                <label for="size-l">L</label>
              </div>
              <div class="single_size_opt ms-2">
                <input
                  type="radio"
                  hidden
                  name="size"
                  class="size_inp"
                  id="size-xl"
                />
                <label for="size-xl">XL</label>
              </div>
            </div>
          </div>
          <div class="shop_filter border-bottom-0 pb-0 mb-0">
            <h4 class="filter_title">Color</h4>
            <div class="size_selector color_selector d-flex align-items-center">
              <div class="single_size_opt">
                <input
                  type="radio"
                  hidden
                  name="color"
                  class="size_inp"
                  id="color-purple"
                />
                <label
                  for="color-purple"
                  class="bg-color"
                  data-bs-toggle="tooltip"
                  title="Rose Red"
                ></label>
              </div>
              <div class="single_size_opt ms-2">
                <input
                  type="radio"
                  hidden
                  name="color"
                  class="size_inp"
                  id="color-red"
                />
                <label
                  for="color-red"
                  class="bg-white"
                  data-bs-toggle="tooltip"
                  title="White"
                ></label>
              </div>
              <div class="single_size_opt ms-2">
                <input
                  type="radio"
                  hidden
                  name="color"
                  class="size_inp"
                  id="color-green"
                  checked
                />
                <label
                  for="color-green"
                  class="bg-dark"
                  data-bs-toggle="tooltip"
                  title="Black"
                ></label>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xl-9 col-lg-8">
        <div class="d-flex align-items-center">
          <div class="d-block d-lg-none">
            <button
              class="default_btn py-2 me-3 rounded"
              id="mobile_filter_btn"
            >
              Filter
            </button>
          </div>
          <div class="sorting_filter d-none d-sm-block">
            <select class="nice_select">
              <option value="">Default sorting</option>
              <option value="">Price low-high</option>
              <option value="">Price high-low</option>
            </select>
          </div>
          <div class="view_filter d-flex align-items-center ms-auto">
            <a href="shop-grid.html">
              <div class="view_icon"><i class="icon-grid"></i></div>
            </a>
            <a href="shop-list.html">
              <div class="view_icon active"><i class="las la-list-ul"></i></div>
            </a>
          </div>
        </div>
        <div class="shop_products">
          <div class="list_view_products">
            @for (product of products; track $index) {
            <div class="single_list_product">
              <div class="row">
                <div class="col-md-4">
                  <div class="list_product_img">
                    <div class="lp_img">
                      <a href="product-view.html">
                        <img
                          loading="lazy"
                          src="{{url_base + product.images[0]}}"
                          alt="product"
                        />
                      </a>
                    </div>
                  </div>
                </div>
                <div class="col-md-8">
                  <div class="product_content">
                    <a routerLink="/auction/{{ product.id }}/detail">
                      <h5>{{product.commercial_name}}</h5>
                    </a>
                    <div class="ratprice">
                      <div class="price">
                        <span class="org_price">{{product.current_bid}} Bs</span>
                        <span class="prev_price">{{product.base_price}} Bs</span>
                      </div>
                      <div class="rating">
                        <div
                          class="d-flex align-items-center justify-content-start"
                        >
                          <div class="rating_star">
                            <span><i class="las la-star"></i></span>
                            <span><i class="las la-star"></i></span>
                            <span><i class="las la-star"></i></span>
                            <span><i class="las la-star"></i></span>
                            <span><i class="las la-star"></i></span>
                          </div>
                          <p class="rating_count">(150)</p>
                        </div>
                      </div>
                      <div class="product_other_info">
                        <p><span>Categoria:</span>{{ product?.category }}</p>
                        <p><span>Fecha de Finalización:</span>{{ product?.end_date }}</p>
                      </div>
                    </div>
                    <p class="product_list_desc">
                      {{product.observation}}
                    </p>
                    <div class="product_list_btns" routerLink="/auction/{{ product.id }}/detail">
                      <button class="list_product_btn" >
                        <span class="icon"><i class="icon-cart"></i></span> Pujar
                      </button>
                      <!--
                      <button class="list_product_btn wish">
                        <span class="icon"><i class="icon-heart"></i></span>
                        Wishlist
                      </button>
                      -->
                    </div>
                  </div>
                </div>
              </div>
            </div>
            }
          </div>
        </div>
        <div
          class="pagination_wrp d-flex align-items-center justify-content-center"
        >
          <div class="single_paginat active">1</div>
          <div class="single_paginat">2</div>
          <div class="single_paginat">3</div>
          <div class="single_paginat">4</div>
          <div class="single_paginat">
            <i class="las la-long-arrow-alt-right"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
